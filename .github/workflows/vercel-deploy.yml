name: Deploy to Vercel
on:
  push:
    branches:
      - main
  workflow_dispatch:
jobs:
  deploy:
    if: ${{ secrets.VERCEL_DEPLOY_HOOK_URL != '' }}
    runs-on: ubuntu-latest
    concurrency:
      group: vercel-deploy-${{ github.ref }}
      cancel-in-progress: true
    steps:
      - name: Trigger Vercel Deploy Hook
        env:
          HOOK_URL: ${{ secrets.VERCEL_DEPLOY_HOOK_URL }}
        run: curl -fsSL -X POST "$HOOK_URL"
